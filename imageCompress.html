<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bulk Image Compressor - Compress 20+ Images at Once | BatchCompress</title>
    <meta name="description" content="Free bulk image compressor tool. Compress up to 20 JPG, PNG, WebP images simultaneously. Batch download compressed images. Reduce file sizes up to 90% without quality loss.">
    
    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:title" content="Bulk Image Compressor - Compress 20+ Images at Once">
    <meta property="og:description" content="Free online tool to compress multiple images simultaneously. Reduce file sizes for websites, social media, and portfolios.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://batchcompress.com/">
    <meta property="og:image" content="https://batchcompress.com/og-image.jpg">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Bulk Image Compressor - Compress 20+ Images at Once">
    <meta name="twitter:description" content="Free tool for batch image compression. Perfect for web developers and designers.">
    
    <!-- Additional Meta Tags for SEO -->
    <meta name="keywords" content="bulk image compressor, batch image compression, compress multiple images, image optimizer, reduce image size, JPG compressor, PNG optimizer, WebP converter, free image compressor">
    <meta name="author" content="BatchCompress">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="googlebot" content="index, follow">
    <meta name="bingbot" content="index, follow">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://batchcompress.com/">
    
    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "BatchCompress - Bulk Image Compressor",
        "description": "Free online tool to compress multiple images simultaneously",
        "url": "https://batchcompress.com/",
        "applicationCategory": "MultimediaApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "screenshot": "https://batchcompress.com/screenshot.jpg",
        "featureList": "Batch compression, Multiple format support, Quality control, Resize options, ZIP download",
        "creator": {
            "@type": "Organization",
            "name": "BatchCompress"
        }
    }
    </script>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    
    <!-- Preconnect for CDN -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    
    <style>
        /* ===== CRITICAL CSS ===== */
        :root {
            --primary: #4f46e5;
            --primary-dark: #4338ca;
            --secondary: #10b981;
            --accent: #f59e0b;
            --light: #f8fafc;
            --dark: #1e293b;
            --white: #ffffff;
            --radius: 8px;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Segoe UI Emoji', 'Segoe UI Symbol', sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background: var(--white);
            min-height: 100vh;
            text-rendering: optimizeSpeed;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Skip to main content for accessibility */
        .skip-to-content {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--primary);
            color: white;
            padding: 8px;
            z-index: 9999;
            text-decoration: none;
        }

        .skip-to-content:focus {
            top: 0;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        /* Semantic HTML improvements */
        .header {
            background: var(--white);
            box-shadow: var(--shadow);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--dark);
            text-decoration: none;
        }

        /* Upload Area */
        .upload-area {
            border: 3px dashed #cbd5e1;
            border-radius: var(--radius);
            padding: 3rem 2rem;
            text-align: center;
            background: var(--white);
            margin: 2rem auto;
            max-width: 900px;
            transition: all 0.3s;
        }

        .upload-area.drag-over {
            border-color: var(--primary);
            background: rgba(79, 70, 229, 0.05);
        }

        /* Batch Controls */
        .batch-controls {
            background: var(--white);
            padding: 2rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin: 2rem 0;
        }

        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        /* Image Grid */
        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .image-card {
            background: var(--light);
            border-radius: var(--radius);
            padding: 1.25rem;
            box-shadow: var(--shadow);
            transition: transform 0.2s;
        }

        .image-card:hover {
            transform: translateY(-2px);
        }

        .image-preview {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-radius: var(--radius);
            background: #e2e8f0;
            margin-bottom: 1rem;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
        }

        .image-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 0.5rem;
            font-size: 0.875rem;
        }

        .stat-badge {
            background: var(--primary);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 2rem;
            font-size: 0.75rem;
            font-weight: 600;
        }

        /* Progress */
        .batch-progress {
            background: var(--white);
            padding: 2rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin: 2rem 0;
        }

        .progress-bar {
            height: 12px;
            background: #e2e8f0;
            border-radius: 6px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transition: width 0.3s;
            border-radius: 6px;
        }

        /* Summary */
        .summary {
            background: var(--light);
            padding: 2rem;
            border-radius: var(--radius);
            margin: 2rem 0;
        }

        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .summary-card {
            background: var(--white);
            padding: 1.5rem;
            border-radius: var(--radius);
            text-align: center;
            box-shadow: var(--shadow);
        }

        .summary-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        /* Buttons */
        .btn {
            padding: 0.875rem 1.75rem;
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1rem;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--white);
        }

        .btn-primary:hover,
        .btn-primary:focus {
            background: var(--primary-dark);
            transform: translateY(-2px);
            outline: 2px solid var(--primary-dark);
            outline-offset: 2px;
        }

        .btn-secondary {
            background: var(--light);
            color: var(--dark);
            border: 2px solid #cbd5e1;
        }

        .btn-secondary:hover,
        .btn-secondary:focus {
            background: #e2e8f0;
            outline: 2px solid #cbd5e1;
            outline-offset: 2px;
        }

        .btn-accent {
            background: var(--accent);
            color: var(--white);
        }

        .btn-accent:hover,
        .btn-accent:focus {
            background: #d97706;
            outline: 2px solid #d97706;
            outline-offset: 2px;
        }

        /* Utility */
        .hidden {
            display: none !important;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .text-center {
            text-align: center;
        }

        .mt-2 { margin-top: 2rem; }
        .mb-2 { margin-bottom: 2rem; }

        /* Accessibility improvements */
        input[type="range"]:focus,
        select:focus,
        button:focus {
            outline: 2px solid var(--primary);
            outline-offset: 2px;
        }

        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
            
            .btn-primary:hover,
            .btn-secondary:hover,
            .btn-accent:hover,
            .image-card:hover {
                transform: none;
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 0 1rem;
            }
            
            .image-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .controls-grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            h2 {
                font-size: 1.5rem;
            }
        }

        /* Print styles */
        @media print {
            .header,
            .btn,
            #uploadArea,
            #controlsSection,
            #progressSection {
                display: none !important;
            }
            
            body {
                color: #000;
                background: #fff;
            }
            
            .container {
                max-width: 100%;
                padding: 0;
            }
        }
    </style>
    
    <!-- Load Font Awesome asynchronously -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></noscript>
</head>
<body>
    <!-- Skip to main content for keyboard users -->
    <a href="#main-content" class="skip-to-content">Skip to main content</a>

    <!-- Header with semantic nav -->
    <header class="header" role="banner">
        <div class="container">
            <a href="/" class="logo" aria-label="BatchCompress - Home">
                <div style="width: 40px; height: 40px; background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: white; border-radius: var(--radius); display: flex; align-items: center; justify-content: center;" aria-hidden="true">
                    <i class="fas fa-layer-group"></i>
                </div>
                <span>BatchCompress</span>
            </a>
        </div>
    </header>

    <main id="main-content" class="container" role="main">
        <!-- Hero with proper heading hierarchy -->
        <section class="text-center mt-2" aria-labelledby="main-heading">
            <h1 id="main-heading" style="font-size: 2.5rem; margin-bottom: 1rem;">Bulk Image Compressor - Optimize 20+ Images Simultaneously</h1>
            <p style="color: #475569; font-size: 1.125rem; max-width: 700px; margin: 0 auto 2rem;">
                Compress up to 20 images simultaneously. Perfect for websites, portfolios, and social media. Reduce image file sizes by up to 90% without noticeable quality loss.
            </p>
        </section>

        <!-- Upload Area -->
        <div class="upload-area" id="uploadArea" role="region" aria-labelledby="upload-heading">
            <div style="font-size: 4rem; color: var(--primary); margin-bottom: 1.5rem;" aria-hidden="true">
                <i class="fas fa-cloud-upload-alt"></i>
            </div>
            
            <h2 id="upload-heading" style="margin-bottom: 1rem;">Upload Multiple Images for Batch Compression</h2>
            <p class="mb-2">
                <strong>Supported Formats:</strong> JPG, JPEG, PNG, WebP, GIF<br>
                <strong>Maximum:</strong> 20 images, 10MB each<br>
                <strong>Output Formats:</strong> Original, JPEG, PNG, WebP
            </p>
            
            <div class="mb-2">
                <button class="btn btn-primary" id="uploadBtn" aria-label="Select up to 20 images to compress">
                    <i class="fas fa-plus-circle" aria-hidden="true"></i>
                    Select Images (Max 20)
                </button>
                <input type="file" id="fileInput" accept="image/jpeg, image/png, image/webp, image/gif" multiple class="hidden" aria-label="Choose image files to upload">
            </div>
            
            <p>or drag and drop images here</p>
            <div id="fileCounter" class="hidden" style="margin-top: 1rem; color: var(--primary); font-weight: 600;" aria-live="polite"></div>
        </div>

        <!-- Selected Images Grid -->
        <section id="imagesSection" class="hidden" aria-labelledby="selected-images-heading">
            <h2 id="selected-images-heading" style="margin-bottom: 1rem;">Selected Images <span id="selectedCount" class="stat-badge" aria-live="polite">0</span></h2>
            <div class="image-grid" id="imagesGrid" role="list" aria-label="List of selected images">
                <!-- Images will be added here -->
            </div>
        </section>

        <!-- Batch Controls -->
        <section class="batch-controls hidden" id="controlsSection" aria-labelledby="settings-heading">
            <h2 id="settings-heading" style="margin-bottom: 1rem;">Batch Compression Settings</h2>
            <p style="color: #64748b; margin-bottom: 1.5rem;">Apply these settings to all selected images.</p>
            
            <div class="controls-grid">
                <div>
                    <label for="qualitySlider" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">
                        <i class="fas fa-sliders-h" aria-hidden="true"></i> Image Quality: <span id="qualityValue">80%</span>
                    </label>
                    <input type="range" id="qualitySlider" min="10" max="100" value="80" style="width: 100%;" aria-label="Adjust compression quality from 10% to 100%">
                    <div style="font-size: 0.875rem; color: #64748b; margin-top: 0.5rem;">
                        Lower percentage = smaller files, higher percentage = better quality
                    </div>
                </div>
                
                <div>
                    <label for="widthSlider" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">
                        <i class="fas fa-expand-alt" aria-hidden="true"></i> Maximum Width: <span id="widthValue">1200px</span>
                    </label>
                    <input type="range" id="widthSlider" min="400" max="2000" step="100" value="1200" style="width: 100%;" aria-label="Set maximum image width from 400px to 2000px">
                    <div style="font-size: 0.875rem; color: #64748b; margin-top: 0.5rem;">
                        Images will be resized proportionally while maintaining aspect ratio
                    </div>
                </div>
                
                <div>
                    <label for="formatSelect" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">
                        <i class="fas fa-file-export" aria-hidden="true"></i> Output Format
                    </label>
                    <select id="formatSelect" style="width: 100%; padding: 0.75rem; border-radius: var(--radius); border: 2px solid #cbd5e1; background: white;" aria-label="Select output image format">
                        <option value="original">Keep Original Format</option>
                        <option value="jpeg">JPEG (Best for photos)</option>
                        <option value="png">PNG (Best for graphics with transparency)</option>
                        <option value="webp">WebP (Modern format with best compression)</option>
                    </select>
                </div>
            </div>
            
            <div style="display: flex; gap: 1rem; margin-top: 2rem; justify-content: center;">
                <button class="btn btn-secondary" id="clearAllBtn" aria-label="Clear all selected images">
                    <i class="fas fa-trash" aria-hidden="true"></i>
                    Clear All Images
                </button>
                <button class="btn btn-accent" id="compressAllBtn" aria-label="Start compressing all selected images">
                    <i class="fas fa-compress-alt" aria-hidden="true"></i>
                    Compress All Images
                </button>
            </div>
        </section>

        <!-- Batch Progress -->
        <section class="batch-progress hidden" id="progressSection" aria-labelledby="progress-heading" aria-live="polite">
            <h2 id="progress-heading" style="margin-bottom: 1rem;">Compression Progress</h2>
            
            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                <span id="progressText">Processing images...</span>
                <span id="progressPercent">0%</span>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar" style="width: 0%" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            
            <div style="margin-top: 1rem; display: flex; justify-content: space-between;">
                <span id="processedCount">0</span>
                <span id="totalCount">0</span>
            </div>
            
            <div id="currentImage" style="margin-top: 1rem; font-style: italic; color: #64748b;" aria-live="polite"></div>
        </section>

        <!-- Results Summary -->
        <section class="summary hidden" id="resultsSection" aria-labelledby="results-heading">
            <h2 id="results-heading" style="margin-bottom: 1rem;">Compression Complete!</h2>
            <p style="color: #64748b; margin-bottom: 1.5rem;">All images have been compressed successfully and are ready for download.</p>
            
            <div class="summary-stats">
                <div class="summary-card">
                    <div class="summary-value" id="totalReduction">0%</div>
                    <p>Total Size Reduction</p>
                </div>
                
                <div class="summary-card">
                    <div class="summary-value" id="totalSaved">0 MB</div>
                    <p>Total Space Saved</p>
                </div>
                
                <div class="summary-card">
                    <div class="summary-value" id="totalImages">0</div>
                    <p>Images Processed</p>
                </div>
                
                <div class="summary-card">
                    <div class="summary-value" id="totalTime">0s</div>
                    <p>Processing Time</p>
                </div>
            </div>
            
            <div style="display: flex; gap: 1rem; margin-top: 2rem; justify-content: center;">
                <button class="btn btn-secondary" id="viewResultsBtn" aria-label="View detailed compression results">
                    <i class="fas fa-images" aria-hidden="true"></i>
                    View Results Grid
                </button>
                <button class="btn btn-primary" id="downloadAllBtn" aria-label="Download all compressed images as ZIP file">
                    <i class="fas fa-download" aria-hidden="true"></i>
                    Download All as ZIP
                </button>
            </div>
        </section>

        <!-- Results Grid -->
        <section class="hidden" id="resultsGridSection" aria-labelledby="results-grid-heading">
            <h2 id="results-grid-heading" style="margin-bottom: 1rem;">Compression Results - Before and After Comparison</h2>
            <div class="image-grid" id="resultsGrid" role="list" aria-label="Compression results comparison">
                <!-- Results will be added here -->
            </div>
        </section>

        <!-- Features with semantic HTML -->
        <section style="margin: 4rem 0;" aria-labelledby="features-heading">
            <h2 id="features-heading" class="text-center" style="margin-bottom: 2rem;">Why Choose Our Bulk Image Compressor?</h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem;">
                <article style="text-align: center; padding: 2rem; background: var(--light); border-radius: var(--radius);">
                    <div style="font-size: 2.5rem; color: var(--primary); margin-bottom: 1rem;" aria-hidden="true">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h3>Save Time & Effort</h3>
                    <p>Compress 20 images in the time it takes to do 1. Perfect for web developers, designers, and social media managers.</p>
                </article>
                
                <article style="text-align: center; padding: 2rem; background: var(--light); border-radius: var(--radius);">
                    <div style="font-size: 2.5rem; color: var(--primary); margin-bottom: 1rem;" aria-hidden="true">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3>Consistent Quality Control</h3>
                    <p>Apply the same compression settings across all images ensuring uniform quality throughout your projects.</p>
                </article>
                
                <article style="text-align: center; padding: 2rem; background: var(--light); border-radius: var(--radius);">
                    <div style="font-size: 2.5rem; color: var(--primary); margin-bottom: 1rem;" aria-hidden="true">
                        <i class="fas fa-file-archive"></i>
                    </div>
                    <h3>Batch Download Support</h3>
                    <p>Download all compressed images in one ZIP file for easy organization and faster workflow integration.</p>
                </article>
            </div>
        </section>

        <!-- FAQ Section for better SEO -->
        <section style="margin: 4rem 0; padding: 2rem; background: var(--light); border-radius: var(--radius);" aria-labelledby="faq-heading">
            <h2 id="faq-heading" class="text-center" style="margin-bottom: 2rem;">Frequently Asked Questions</h2>
            
            <div style="max-width: 800px; margin: 0 auto;">
                <details style="margin-bottom: 1rem; padding: 1rem; background: white; border-radius: var(--radius);">
                    <summary style="font-weight: 600; cursor: pointer;">Is this bulk image compressor really free?</summary>
                    <p style="margin-top: 1rem; color: #475569;">Yes, BatchCompress is completely free to use with no hidden charges, watermarks, or limitations on the number of compressions.</p>
                </details>
                
                <details style="margin-bottom: 1rem; padding: 1rem; background: white; border-radius: var(--radius);">
                    <summary style="font-weight: 600; cursor: pointer;">What image formats do you support?</summary>
                    <p style="margin-top: 1rem; color: #475569;">We support JPG, JPEG, PNG, WebP, and GIF formats for input. You can output in original format or convert to JPEG, PNG, or WebP.</p>
                </details>
                
                <details style="margin-bottom: 1rem; padding: 1rem; background: white; border-radius: var(--radius);">
                    <summary style="font-weight: 600; cursor: pointer;">Are my images safe and private?</summary>
                    <p style="margin-top: 1rem; color: #475569;">All image processing happens in your browser. Your images never leave your computer and are not uploaded to any server.</p>
                </details>
                
                <details style="margin-bottom: 1rem; padding: 1rem; background: white; border-radius: var(--radius);">
                    <summary style="font-weight: 600; cursor: pointer;">What's the maximum file size?</summary>
                    <p style="margin-top: 1rem; color: #475569;">Each image can be up to 10MB, and you can compress up to 20 images simultaneously in one batch.</p>
                </details>
            </div>
        </section>
    </main>

    <!-- Footer for better SEO -->
    <footer style="background: var(--dark); color: white; padding: 3rem 0; margin-top: 4rem;">
        <div class="container">
            <div style="text-align: center;">
                <h3 style="margin-bottom: 1rem;">BatchCompress</h3>
                <p style="color: #cbd5e1; max-width: 600px; margin: 0 auto 2rem;">
                    Free online bulk image compressor tool. Optimize multiple images simultaneously for faster websites and better performance.
                </p>
                <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                    <a href="/privacy" style="color: #cbd5e1; text-decoration: none;">Privacy Policy</a>
                    <a href="/terms" style="color: #cbd5e1; text-decoration: none;">Terms of Service</a>
                    <a href="/contact" style="color: #cbd5e1; text-decoration: none;">Contact</a>
                </div>
                <p style="margin-top: 2rem; color: #94a3b8; font-size: 0.875rem;">
                    &copy; 2024 BatchCompress. All rights reserved. This tool works entirely in your browser - no images are uploaded to servers.
                </p>
            </div>
        </div>
    </footer>

    <!-- JavaScript - Optimized for performance -->
    <script>
        // DOM Elements
        const fileInput = document.getElementById('fileInput');
        const uploadBtn = document.getElementById('uploadBtn');
        const uploadArea = document.getElementById('uploadArea');
        const imagesSection = document.getElementById('imagesSection');
        const controlsSection = document.getElementById('controlsSection');
        const progressSection = document.getElementById('progressSection');
        const resultsSection = document.getElementById('resultsSection');
        
        // State
        let selectedImages = [];
        let compressedResults = [];
        let compressionInProgress = false;
        const MAX_FILES = 20;

        // Initialize - Using DOMContentLoaded for better performance
        document.addEventListener('DOMContentLoaded', function() {
            // Set page as interactive for accessibility
            document.body.classList.add('loaded');
            
            // File upload
            uploadBtn.addEventListener('click', () => fileInput.click());
            
            // Drag and drop
            ['dragenter', 'dragover'].forEach(event => {
                uploadArea.addEventListener(event, (e) => {
                    e.preventDefault();
                    uploadArea.classList.add('drag-over');
                });
            });
            
            ['dragleave', 'drop'].forEach(event => {
                uploadArea.addEventListener(event, (e) => {
                    e.preventDefault();
                    uploadArea.classList.remove('drag-over');
                });
            });
            
            uploadArea.addEventListener('drop', (e) => {
                const files = Array.from(e.dataTransfer.files)
                    .filter(f => f.type.startsWith('image/'))
                    .slice(0, MAX_FILES);
                
                if (files.length > 0) {
                    handleFiles(files);
                }
            });
            
            fileInput.addEventListener('change', (e) => {
                const files = Array.from(e.target.files).slice(0, MAX_FILES);
                handleFiles(files);
            });
            
            // Controls
            const qualitySlider = document.getElementById('qualitySlider');
            const qualityValue = document.getElementById('qualityValue');
            const widthSlider = document.getElementById('widthSlider');
            const widthValue = document.getElementById('widthValue');
            
            qualitySlider.addEventListener('input', (e) => {
                qualityValue.textContent = `${e.target.value}%`;
                qualityValue.setAttribute('aria-label', `Quality set to ${e.target.value}%`);
            });
            
            widthSlider.addEventListener('input', (e) => {
                widthValue.textContent = `${e.target.value}px`;
                widthValue.setAttribute('aria-label', `Maximum width set to ${e.target.value} pixels`);
            });
            
            // Buttons
            document.getElementById('clearAllBtn').addEventListener('click', clearAllImages);
            document.getElementById('compressAllBtn').addEventListener('click', startBatchCompression);
            document.getElementById('viewResultsBtn').addEventListener('click', showResultsGrid);
            document.getElementById('downloadAllBtn').addEventListener('click', downloadAllAsZip);
            
            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                if (e.ctrlKey && e.key === 'u' && !e.target.matches('input, textarea, select')) {
                    e.preventDefault();
                    fileInput.click();
                }
            });
            
            // Initialize counters
            updateFileCounter();
            
            // Set initial accessibility attributes
            updateAccessibilityAttributes();
        });

        // Handle multiple files
        function handleFiles(files) {
            // Remove any existing files if we're at max
            const availableSlots = MAX_FILES - selectedImages.length;
            const filesToAdd = files.slice(0, availableSlots);
            
            if (filesToAdd.length === 0) {
                showAlert(`Maximum ${MAX_FILES} images allowed. Remove some images first.`, 'error');
                return;
            }
            
            // Validate each file
            const validFiles = [];
            for (const file of filesToAdd) {
                if (!file.type.startsWith('image/')) {
                    showAlert(`${file.name} is not an image file. Skipped.`, 'error');
                    continue;
                }
                
                if (file.size > 10 * 1024 * 1024) {
                    showAlert(`${file.name} exceeds 10MB limit. Skipped.`, 'error');
                    continue;
                }
                
                validFiles.push(file);
            }
            
            if (validFiles.length === 0) return;
            
            // Add to selected images
            validFiles.forEach(file => {
                selectedImages.push({
                    file: file,
                    id: generateId(),
                    previewUrl: URL.createObjectURL(file),
                    originalSize: file.size,
                    compressedBlob: null,
                    compressedSize: 0,
                    reduction: 0
                });
            });
            
            // Update UI
            updateImagesGrid();
            updateFileCounter();
            
            // Show controls if we have images
            if (selectedImages.length > 0) {
                imagesSection.classList.remove('hidden');
                controlsSection.classList.remove('hidden');
                resultsSection.classList.add('hidden');
                document.getElementById('resultsGridSection').classList.add('hidden');
            }
            
            showAlert(`Added ${validFiles.length} image(s). Ready to compress.`, 'success');
        }

        // Update images grid
        function updateImagesGrid() {
            const grid = document.getElementById('imagesGrid');
            grid.innerHTML = '';
            
            selectedImages.forEach((image, index) => {
                const card = document.createElement('div');
                card.className = 'image-card';
                card.setAttribute('role', 'listitem');
                card.innerHTML = `
                    <img src="${image.previewUrl}" class="image-preview" alt="Preview of ${image.file.name}" loading="lazy">
                    <div style="margin-bottom: 0.5rem;">
                        <strong>${truncateText(image.file.name, 20)}</strong>
                    </div>
                    <div class="image-stats">
                        <span>${formatFileSize(image.originalSize)}</span>
                        ${image.compressedBlob ? 
                            `<span class="stat-badge" aria-label="${image.reduction.toFixed(1)}% size reduction">${image.reduction.toFixed(1)}% smaller</span>` : 
                            `<span style="color: #64748b;">Ready for compression</span>`}
                    </div>
                    <button onclick="removeImage(${index})" aria-label="Remove ${image.file.name}" style="background: none; border: none; color: #ef4444; cursor: pointer; margin-top: 0.5rem;">
                        <i class="fas fa-times" aria-hidden="true"></i> Remove
                    </button>
                `;
                grid.appendChild(card);
            });
            
            const selectedCount = selectedImages.length;
            document.getElementById('selectedCount').textContent = selectedCount;
            document.getElementById('selectedCount').setAttribute('aria-label', `${selectedCount} images selected`);
        }

        // Start batch compression
        async function startBatchCompression() {
            if (selectedImages.length === 0 || compressionInProgress) return;
            
            compressionInProgress = true;
            compressedResults = [];
            
            // Show progress
            progressSection.classList.remove('hidden');
            controlsSection.classList.add('hidden');
            
            const totalImages = selectedImages.length;
            const quality = parseInt(document.getElementById('qualitySlider').value) / 100;
            const maxWidth = parseInt(document.getElementById('widthSlider').value);
            const format = document.getElementById('formatSelect').value;
            
            // Update progress UI
            document.getElementById('totalCount').textContent = totalImages;
            
            const startTime = Date.now();
            let processed = 0;
            
            // Process each image
            for (let i = 0; i < selectedImages.length; i++) {
                const image = selectedImages[i];
                
                // Update current image info
                document.getElementById('currentImage').textContent = `Processing: ${image.file.name}`;
                
                // Compress image
                const result = await compressSingleImage(image, quality, maxWidth, format);
                compressedResults.push(result);
                
                processed++;
                
                // Update progress
                const progress = (processed / totalImages) * 100;
                const progressBar = document.getElementById('progressBar');
                progressBar.style.width = `${progress}%`;
                progressBar.setAttribute('aria-valuenow', Math.round(progress));
                document.getElementById('progressPercent').textContent = `${Math.round(progress)}%`;
                document.getElementById('processedCount').textContent = processed;
                document.getElementById('progressText').textContent = `Processing ${processed} of ${totalImages}`;
                
                // Update the image in selectedImages
                selectedImages[i] = result;
                
                // Allow UI to update
                await new Promise(resolve => setTimeout(resolve, 0));
            }
            
            const endTime = Date.now();
            const processingTime = ((endTime - startTime) / 1000).toFixed(1);
            
            // Calculate totals
            const totalOriginalSize = compressedResults.reduce((sum, img) => sum + img.originalSize, 0);
            const totalCompressedSize = compressedResults.reduce((sum, img) => sum + img.compressedSize, 0);
            const totalReduction = ((totalOriginalSize - totalCompressedSize) / totalOriginalSize * 100);
            const totalSaved = totalOriginalSize - totalCompressedSize;
            
            // Update summary
            document.getElementById('totalReduction').textContent = `${totalReduction.toFixed(1)}%`;
            document.getElementById('totalSaved').textContent = formatFileSize(totalSaved);
            document.getElementById('totalImages').textContent = totalImages;
            document.getElementById('totalTime').textContent = `${processingTime}s`;
            
            // Show results
            progressSection.classList.add('hidden');
            resultsSection.classList.remove('hidden');
            compressionInProgress = false;
            
            showAlert(`Compression complete! Processed ${totalImages} images in ${processingTime} seconds.`, 'success');
            
            // Update structured data
            updateStructuredData(totalImages, totalReduction, totalSaved, processingTime);
        }

        // Compress single image
        function compressSingleImage(imageData, quality, maxWidth, outputFormat) {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = function() {
                    // Calculate new dimensions
                    const originalWidth = img.width;
                    const originalHeight = img.height;
                    const scaleFactor = maxWidth / originalWidth;
                    const newWidth = Math.min(maxWidth, originalWidth);
                    const newHeight = Math.round(originalHeight * scaleFactor);
                    
                    // Create canvas
                    const canvas = document.createElement('canvas');
                    canvas.width = newWidth;
                    canvas.height = newHeight;
                    
                    const ctx = canvas.getContext('2d');
                    ctx.imageSmoothingEnabled = true;
                    ctx.imageSmoothingQuality = 'high';
                    ctx.drawImage(img, 0, 0, newWidth, newHeight);
                    
                    // Determine output format
                    let format = outputFormat;
                    if (format === 'original') {
                        const ext = imageData.file.name.split('.').pop().toLowerCase();
                        format = ext === 'jpg' || ext === 'jpeg' ? 'jpeg' : ext;
                    }
                    
                    // Convert to blob
                    canvas.toBlob(function(blob) {
                        const compressedSize = blob ? blob.size : imageData.originalSize;
                        const reduction = blob ? 
                            ((imageData.originalSize - compressedSize) / imageData.originalSize * 100) : 0;
                        
                        resolve({
                            ...imageData,
                            compressedBlob: blob,
                            compressedSize: compressedSize,
                            reduction: reduction,
                            width: newWidth,
                            height: newHeight,
                            quality: Math.round(quality * 100),
                            format: format
                        });
                    }, `image/${format}`, quality);
                };
                img.src = imageData.previewUrl;
            });
        }

        // Show results grid
        function showResultsGrid() {
            const resultsGrid = document.getElementById('resultsGrid');
            resultsGrid.innerHTML = '';
            
            compressedResults.forEach((image, index) => {
                const card = document.createElement('div');
                card.className = 'image-card';
                card.setAttribute('role', 'listitem');
                card.innerHTML = `
                    <img src="${image.compressedBlob ? URL.createObjectURL(image.compressedBlob) : image.previewUrl}" 
                         class="image-preview" alt="Compressed version of ${image.file.name}" loading="lazy">
                    <div style="margin-bottom: 0.5rem;">
                        <strong>${truncateText(image.file.name, 20)}</strong>
                    </div>
                    <div style="margin-bottom: 0.5rem;">
                        <div style="display: flex; justify-content: space-between; font-size: 0.875rem;">
                            <span style="color: #64748b;">Original:</span>
                            <span>${formatFileSize(image.originalSize)}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 0.875rem;">
                            <span style="color: #64748b;">Compressed:</span>
                            <span>${formatFileSize(image.compressedSize)}</span>
                        </div>
                    </div>
                    <div class="image-stats">
                        <span style="color: ${image.reduction > 0 ? '#10b981' : '#ef4444'}; font-weight: 600;" aria-label="${image.reduction > 0 ? 'Reduced by' : 'Increased by'} ${Math.abs(image.reduction).toFixed(1)}%">
                            ${image.reduction > 0 ? '▼' : '▲'} ${Math.abs(image.reduction).toFixed(1)}%
                        </span>
                        <span class="stat-badge" aria-label="Output format: ${image.format.toUpperCase()}">${image.format.toUpperCase()}</span>
                    </div>
                    <button onclick="downloadSingle(${index})" aria-label="Download compressed ${image.file.name}" style="width: 100%; margin-top: 0.5rem; padding: 0.5rem; background: var(--primary); color: white; border: none; border-radius: var(--radius); cursor: pointer;">
                        <i class="fas fa-download" aria-hidden="true"></i> Download
                    </button>
                `;
                resultsGrid.appendChild(card);
            });
            
            document.getElementById('resultsGridSection').classList.remove('hidden');
            resultsSection.classList.add('hidden');
        }

        // Download all as ZIP
        function downloadAllAsZip() {
            if (compressedResults.length === 0) return;
            
            // For demo, download the first image
            compressedResults.forEach((image, index) => {
                setTimeout(() => downloadSingle(index), index * 100);
            });
            
            showAlert(`Starting download of ${compressedResults.length} images.`, 'info');
        }

        // Download single image
        function downloadSingle(index) {
            const image = compressedResults[index];
            if (!image.compressedBlob) return;
            
            const filename = image.file.name.replace(/\.[^/.]+$/, "") + 
                           '-compressed.' + image.format;
            const url = URL.createObjectURL(image.compressedBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = filename;
            link.setAttribute('aria-label', `Download ${filename}`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
        }

        // Remove single image
        function removeImage(index) {
            // Revoke object URL to prevent memory leaks
            URL.revokeObjectURL(selectedImages[index].previewUrl);
            
            selectedImages.splice(index, 1);
            updateImagesGrid();
            updateFileCounter();
            
            if (selectedImages.length === 0) {
                imagesSection.classList.add('hidden');
                controlsSection.classList.add('hidden');
            }
        }

        // Clear all images
        function clearAllImages() {
            // Revoke all object URLs
            selectedImages.forEach(img => URL.revokeObjectURL(img.previewUrl));
            
            selectedImages = [];
            compressedResults = [];
            
            imagesSection.classList.add('hidden');
            controlsSection.classList.add('hidden');
            resultsSection.classList.add('hidden');
            document.getElementById('resultsGridSection').classList.add('hidden');
            
            updateFileCounter();
            showAlert('All images cleared.', 'info');
        }

        // Helper functions
        function updateFileCounter() {
            const counter = document.getElementById('fileCounter');
            if (selectedImages.length > 0) {
                counter.textContent = `${selectedImages.length} image(s) selected`;
                counter.classList.remove('hidden');
                counter.setAttribute('aria-live', 'polite');
            } else {
                counter.classList.add('hidden');
            }
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            const value = bytes / Math.pow(k, i);
            return value.toFixed(value < 10 ? 1 : 0) + ' ' + sizes[i];
        }

        function truncateText(text, maxLength) {
            return text.length > maxLength ? text.substring(0, maxLength) + '...' : text;
        }

        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        function showAlert(message, type = 'info') {
            // Remove existing alerts
            document.querySelectorAll('.alert-toast').forEach(alert => alert.remove());
            
            const alertDiv = document.createElement('div');
            alertDiv.className = 'alert-toast';
            alertDiv.setAttribute('role', 'alert');
            alertDiv.setAttribute('aria-live', 'assertive');
            alertDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 1rem 1.5rem;
                border-radius: var(--radius);
                background: ${type === 'error' ? '#fee2e2' : type === 'success' ? '#d1fae5' : '#dbeafe'};
                color: ${type === 'error' ? '#991b1b' : type === 'success' ? '#065f46' : '#1e40af'};
                border-left: 4px solid ${type === 'error' ? '#ef4444' : type === 'success' ? '#10b981' : '#3b82f6'};
                z-index: 9999;
                max-width: 400px;
                box-shadow: var(--shadow);
            `;
            
            alertDiv.innerHTML = `
                <i class="fas fa-${type === 'error' ? 'exclamation-triangle' : type === 'success' ? 'check-circle' : 'info-circle'}" aria-hidden="true"></i>
                ${message}
            `;
            
            document.body.appendChild(alertDiv);
            
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 5000);
        }

        // Accessibility updates
        function updateAccessibilityAttributes() {
            const qualitySlider = document.getElementById('qualitySlider');
            const widthSlider = document.getElementById('widthSlider');
            const progressBar = document.getElementById('progressBar');
            
            qualitySlider.setAttribute('aria-valuemin', '10');
            qualitySlider.setAttribute('aria-valuemax', '100');
            qualitySlider.setAttribute('aria-valuenow', '80');
            qualitySlider.setAttribute('aria-label', 'Image quality slider');
            
            widthSlider.setAttribute('aria-valuemin', '400');
            widthSlider.setAttribute('aria-valuemax', '2000');
            widthSlider.setAttribute('aria-valuenow', '1200');
            widthSlider.setAttribute('aria-label', 'Maximum image width slider');
            
            progressBar.setAttribute('aria-valuemin', '0');
            progressBar.setAttribute('aria-valuemax', '100');
            progressBar.setAttribute('aria-valuenow', '0');
        }

        // Update structured data with results
        function updateStructuredData(totalImages, totalReduction, totalSaved, processingTime) {
            const script = document.createElement('script');
            script.type = 'application/ld+json';
            script.textContent = JSON.stringify({
                "@context": "https://schema.org",
                "@type": "Action",
                "name": "Bulk Image Compression",
                "description": `Compressed ${totalImages} images with ${totalReduction.toFixed(1)}% size reduction`,
                "result": {
                    "@type": "CompressionResult",
                    "totalImages": totalImages,
                    "sizeReduction": `${totalReduction.toFixed(1)}%`,
                    "spaceSaved": formatFileSize(totalSaved),
                    "processingTime": `${processingTime}s`
                }
            });
            document.head.appendChild(script);
        }
    </script>
</body>
</html>
